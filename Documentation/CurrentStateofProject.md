# Current State of project (as of May 2024)

## Document Contents

- Current Implementations
- Future Directions
- Which classes are relevant to each feature.

## Current Implemented Features

- ### User Authentication ([Login.jsx](/frontend/src/components/Login.jsx))

  User will be able to access this application only after sucessful login. After successful login, backend will return an authentication token which can be used as an input for rest all APIs to retrieve data from backend server. This token can be accessed through [redux state](/frontend/src/Redux/authReducer.js) in any component of the frontend code.

  ![image](https://github.com/edcsdev/api_backend/assets/113642858/f8027a0e-a4d2-4a7c-aa10-0b397ca7e08d)

- ### Fetch game logs ([Logs.jsx](/frontend/src/components/Login.jsx), [api.js](/frontend/src/Services/api.js), [GameSession.js](/controller/GameSession.js))

  On successful login, UI will call an API to fetch the available valid logs from the backend server. It will return empty array if no records available in the DB. UI will render the list of all the valid logs on successful response from backend API. It will display game session ID, No. of Levels attempted and total duration of the game session.

  ![image](https://github.com/edcsdev/api_backend/assets/113642858/cbbc17fa-2a3e-43e4-afe9-921b5ce61a5a)

- ### Save game logs ([JSONConverter.js](/data-transformations/JsonConverter.js), [GameSession.js](/controller/GameSession.js))

  There is no any provision to save a new log from UI. Noisrucer game will invoke the POST API to save logs. Backend will process the input data and convert into expected JSON format before actually storing it into the DB. For understanding conversion of JSON, please refer to [JSONConverter file](/data-transformations/JsonConverter.js). If any of the log information is missing on the UI, please refer to the same JSONConverter function from [this file](/data-transformations/JsonConverter.js). This function validates the logs before saving into the correct collection. If levelName is missing or start datetime is greater than end datetime, it will store this as a error log into a separate collection.
  
- ### Search logs based on game session id ([Logs.jsx](/frontend/src/components/Login.jsx), [DisplayLogs.jsx](/frontend/src/components/DisplayLogs.jsx))

    On the logs page, a user can search for any game session based on game session ID. Logs will be filtered based on the matching game session ID. It will reset the pagination page to page 1.

  ![image](https://github.com/edcsdev/api_backend/assets/113642858/99657959-8084-4069-8d4a-e8b5ec001d49)
  
- ### View logs JSON ([DisplayLogs.jsx](/frontend/src/components/DisplayLogs.jsx), [LevelSession.jsx](/frontend/src/components/LevelSession.jsx))

    If user clicks on an individual log, it will expand the card and display additional details of selcted game session. It has ability to render JSON values with exapnd and collapse feature. User can copy any object from selected JSON view. It uses react18-json-view package to render JSON. It will exapnd 1st level nested object by default. It can be customized by passing expected value for level of expansion to collapsed parameter of JsonView component from LevelSession.jsx file.

  ![image](https://github.com/edcsdev/api_backend/assets/113642858/08a3598e-9bc1-4bd0-8df3-ce9602661193)

- ### Pagination ([Logs.jsx](/frontend/src/components/Login.jsx), [DisplayLogs.jsx](/frontend/src/components/DisplayLogs.jsx))

    Logs page has pagination component to navigate through different pages. By default it shows 10 records per page which can be configured through [constants.js](/frontend/src/utility/constants/GameConstants.js) by changing value for ITEMS_PER_PAGE.

  ![image](https://github.com/edcsdev/api_backend/assets/113642858/4513fe9d-ae1f-4251-a964-17352818ce5f)

- ### Dashboard ([Dashboard.jsx](/frontend/src/components/Dashboard.jsx))

    Dashboard provides the overall analytics on the logs generated by the Noisrucer game. Dashboard component will fetch all the dashboard data through REST APIs mentioned [here](/Documentation//DashboardAPIs.md).
    It has following charts to provide analytical insights of the Noisrucer game.

  ![image](https://github.com/edcsdev/api_backend/assets/113642858/1be1cb41-0021-480f-9e2d-49608da78efc)

- #### Valid Logs over specified period (# no of days) ([LogsBar.jsx](/frontend/src/components/charts/LogsBar.jsx), [DisplayLogs.jsx](/frontend/src/components/DisplayLogs.jsx))

    This is a bar chart that shows count of the valid logs over last 24 hours, last 7 days and last 30 days. This can be customized by modifying TIME_PERIODS value from the [ChartConstants file](/frontend/src/utility/constants/ChartConstants.js). UI will make a request to server for no of days specified in the TIME_PERIODS constant. Chart will automatically render data for those many days. On click of any bar, it will show logs associated with clicked bar.

  ![image](https://github.com/edcsdev/api_backend/assets/113642858/1de5b1e3-31ad-424a-9b05-c14794325cb2)

  ![image](https://github.com/edcsdev/api_backend/assets/113642858/44a528fe-9a69-4a17-a4e1-a0f43f227fed)

- #### Invalid Logs over specified period (# no of days) ([LogsBar.jsx](/frontend/src/components/charts/LogsBar.jsx), [DisplayLogs.jsx](/frontend/src/components/DisplayLogs.jsx))

    This is a bar chart that shows count of the invalid logs over last 24 hours, last 7 days and last 30 days. This can be customized by modifying TIME_PERIODS value from the [ChartConstants file](/frontend/src/utility/constants/ChartConstants.js). UI will make a request to server for no of days specified in the TIME_PERIODS constant. Chart will automatically render data for those many days. On click of any bar, it will show logs associated with clicked bar.

  ![image](https://github.com/edcsdev/api_backend/assets/113642858/7d7f4143-89be-4355-aaed-ec06da27467c)

  ![image](https://github.com/edcsdev/api_backend/assets/113642858/205342c1-0e95-4d3c-b222-5f2fc149127c)

- #### Top 3 Popular Levels over specified period (# no of days) ([Bar.jsx](/frontend/src/components/charts/Bar.jsx), [DisplayLogs.jsx](/frontend/src/components/DisplayLogs.jsx))

    This is a bar chart that shows Top 3 Popular Levels over last 24 hours, last 7 days and last 30 days. This can be customized by modifying TIME_PERIODS value from the [ChartConstants file](/frontend/src/utility/constants/ChartConstants.js). This chart has a dropdown to switch between no of days. UI will generate a new chart based on the selected days. UI will make a request to server for no of days specified in the TIME_PERIODS constant. Chart will automatically render chart data as well as dropdown values based on the values specified in the TIME_PERIODS constant. On click of any bar, it will show the details of selected Level.

  ![image](https://github.com/edcsdev/api_backend/assets/113642858/e38694f7-e07e-457c-b7b7-23293cdf09e4)

  ![image](https://github.com/edcsdev/api_backend/assets/113642858/ad7ab795-5420-4bed-b905-f392f0d6e364)

- #### Top 3 Longest Levels over specified period (# no of days) ([Bar.jsx](/frontend/src/components/charts/Bar.jsx), [DisplayLogs.jsx](/frontend/src/components/DisplayLogs.jsx))

    This is a bar chart that shows Top 3 Longest Levels over last 24 hours, last 7 days and last 30 days. This can be customized by modifying TIME_PERIODS value from the [ChartConstants file](/frontend/src/utility/constants/ChartConstants.js). This chart has a dropdown to switch between no of days. UI will generate a new chart based on the selected days. UI will make a request to server for no of days specified in the TIME_PERIODS constant. Chart will automatically render chart data as well as dropdown values based on the values specified in the TIME_PERIODS constant. On click of any bar, it will show the details of selected Level along with time taken in milliseconds.

  ![image](https://github.com/edcsdev/api_backend/assets/113642858/a8f5bbef-22a9-49d9-b8d7-71202cc09866)

  ![image](https://github.com/edcsdev/api_backend/assets/113642858/91219cb9-9771-4315-b5f4-7b32f644dbd6)

- #### Average time for game sessions over specified period (# no of days) ([Bar.jsx](/frontend/src/components/charts/Bar.jsx))

    This is a bar chart that shows Average time for game sessions over last 24 hours, last 7 days and last 30 days. This can be customized by modifying TIME_PERIODS value from the [ChartConstants file](/frontend/src/utility/constants/ChartConstants.js). UI will make a request to server for no of days specified in the TIME_PERIODS constant. Chart will automatically render chart data based on the values specified in the TIME_PERIODS constant.

  ![image](https://github.com/edcsdev/api_backend/assets/113642858/f1396dd7-cef0-4d7a-beb5-240faf4d60b1)

- #### Most common Errors ([Bar.jsx](/frontend/src/components/charts/Pie.jsx))

    This is a pie chart that shows Most common Errors over last 24 hours, last 7 days and last 30 days. This can be customized by modifying TIME_PERIODS value from the [ChartConstants file](/frontend/src/utility/constants/ChartConstants.js). This chart has a dropdown to switch between no of days. UI will generate a new chart based on the selected days. UI will make a request to server for no of days specified in the TIME_PERIODS constant. Chart will automatically render chart data as well as dropdown values based on the values specified in the TIME_PERIODS constant.

  ![image](https://github.com/edcsdev/api_backend/assets/113642858/fb1f15e4-6fbc-4fcc-b110-17a6c2867944)

## Unit Tests

- The project also has unit tests for validating logs APIs, dashboard APIS and JSON converstor. As of now all these tests are passing. If they fail after a commit that means there might be an issue with what was changed.

## Continuous Integration

- Whenever you push the project it will be built in GitHub actions. When it is built GitHub actions will check if all the unit tests passed, and if your projects coding style matches the Eslint and Documentation lint standards. The build will pass if both these conditions are met, otherwise it will fail. If the build fails it is important that you fix whatever maybe causing issues!

## Future work

- [ ] Add analytical insights on the dashboard
    - Number of successful play sessions happened over specified time
    - The difficult level
    - Time taken by the user to complete a particular level
- [ ] Filter logs based on different parameters
    - Start Time
    - End Time
    - Level Name
    - Game id
    - Simple text
